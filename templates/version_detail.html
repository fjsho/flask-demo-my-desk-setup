<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Desk Environment - バージョン詳細</title>
  </head>
  <body>
    <h1>バージョン詳細</h1>
    <h2>{{ version.versionName }}</h2>
    <p>作成日時: {{ version.createdAt }}</p>

    <!-- 登録されているアイテム一覧 -->
    <h3>このバージョンに含まれるアイテム</h3>
    {% if version_items %}
    <ul>
      {% for it in version_items %}
      <li>
        {{ it.name }} ({{ it.category }})
        <!-- アイテム削除ボタン -->
        <form
          action="{{ url_for('remove_item_from_version', version_id=version.id) }}"
          method="POST"
          style="display: inline"
        >
          <input type="hidden" name="item_id" value="{{ it.id }}" />
          <button type="submit">削除</button>
        </form>
      </li>
      {% endfor %}
    </ul>
    {% else %}
    <p>まだアイテムがありません。</p>
    {% endif %}

    <!-- アイテム追加フォーム (既存アイテム選択) -->
    <h3>アイテムを追加</h3>
    <form
      action="{{ url_for('add_item_to_version', version_id=version.id) }}"
      method="POST"
    >
      <label for="item_id">追加するアイテム:</label>
      <select name="item_id">
        {% for it in all_items %}
        <option value="{{ it.id }}">{{ it.name }} ({{ it.category }})</option>
        {% endfor %}
      </select>
      <button type="submit">追加</button>
    </form>

    <hr />
    <p><a href="{{ url_for('index') }}">トップ画面</a></p>
  </body>
</html>
