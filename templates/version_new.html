<!DOCTYPE html>
<html>
<head><meta charset="utf-8"/><title>New Version</title></head>
<body>
  <h1>デスク環境バージョン新規登録</h1>

  {% if last_version %}
    <p>前回登録: {{ last_version.versionName }} ({{ last_version.startPeriod }} ~ {{ last_version.endPeriod }})</p>
  {% endif %}

  <form method="POST">
    <div>
      <label>バージョン名: </label>
      <input type="text" name="versionName" required/>
    </div>
    <div>
      <label>始期(yyyy-mm-dd): </label>
      <input type="date" name="startPeriod" />  <!-- HTML5 date input -->
    </div>
    <div>
      <label>終期(yyyy-mm-dd): </label>
      <input type="date" name="endPeriod" />
    </div>

    <hr/>
    <h3>既存アイテムをアタッチ</h3>
    {% for it in items %}
      <div>
        <input type="checkbox" name="attach_item_ids" value="{{ it.id }}"/>
        {{ it.name }} ({{ it.category }}) [<a href="{{ it.productLink }}">link</a>]
      </div>
    {% endfor %}

    <hr/>
    <h3>新規アイテムを登録してアタッチ</h3>
    <div>
      <label>名前:</label>
      <input type="text" name="new_item_name" />
    </div>
    <div>
      <label>カテゴリ:</label>
      <input type="text" name="new_item_category" />
    </div>
    <div>
      <label>商品リンク:</label>
      <input type="text" name="new_item_link" />
    </div>

    <hr/>
    <button type="submit">登録</button>
  </form>

  <p><a href="{{ url_for('index') }}">トップに戻る</a></p>
</body>
</html>
